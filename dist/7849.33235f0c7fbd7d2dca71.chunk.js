(self.webpackChunkmapstore2=self.webpackChunkmapstore2||[]).push([[7849],{957043:(t,e,i)=>{var r=i(862488),o=i(121078),n=i(200278),s=i(701469);t.exports=function(){var t=arguments.length;if(!t)return[];for(var e=Array(t-1),i=arguments[0],a=t;a--;)e[a-1]=arguments[a];return r(s(i)?n(i):[i],o(e,1))}},823493:(t,e,i)=>{var r=i(23279),o=i(513218);t.exports=function(t,e,i){var n=!0,s=!0;if("function"!=typeof t)throw new TypeError("Expected a function");return o(i)&&(n="leading"in i?!!i.leading:n,s="trailing"in i?!!i.trailing:s),r(t,e,{leading:n,maxWait:e,trailing:s})}},232062:(t,e,i)=>{"use strict";i.d(e,{Z:()=>r});const r=function(t){function e(e,i,r,o,n){t.call(this,e,i,n),this.originalEvent=r,this.pixel=i.getEventPixel(r),this.coordinate=i.getCoordinateFromPixel(this.pixel),this.dragging=void 0!==o&&o}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.preventDefault=function(){t.prototype.preventDefault.call(this),this.originalEvent.preventDefault()},e.prototype.stopPropagation=function(){t.prototype.stopPropagation.call(this),this.originalEvent.stopPropagation()},e}(i(110255).Z)},486968:(t,e,i)=>{"use strict";i.d(e,{Z:()=>r});const r=function(t){function e(e,i,r,o,n){t.call(this,e,i,r.originalEvent,o,n),this.pointerEvent=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(i(232062).Z)},110255:(t,e,i)=>{"use strict";i.d(e,{Z:()=>r});const r=function(t){function e(e,i,r){t.call(this,e),this.map=i,this.frameState=void 0!==r?r:null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(i(9520).ZP)},372445:(t,e,i)=>{"use strict";i.d(e,{ZP:()=>M});var r=i(173381),o=i(623068),n=i(30006),s=i(486968),a=i(558493),h=i(690728),u=i(613002),l=i(9520),_=i(436403),c=i(864011),p=i(869669),d=i(28795),g=i(944538),f=i(525642),y=i(552329),v=i(513987),m=i(468338),C=i(752043),x=i(640353),F=i(938024),E=i(173604),T=i(429902),w=i(973410),P=i(831219),L="Point",S="LineString",Z="Polygon",I="Circle",G="drawstart",k=function(t){function e(e,i){t.call(this,e),this.feature=i}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(l.ZP);const M=function(t){function e(e){var i=e;i.stopDown||(i.stopDown=c.Dv),t.call(this,i),this.shouldHandle_=!1,this.downPx_=null,this.downTimeout_,this.lastDragTime_,this.freehand_=!1,this.source_=e.source?e.source:null,this.features_=e.features?e.features:null,this.snapTolerance_=e.snapTolerance?e.snapTolerance:12,this.type_=e.type,this.mode_=function(t){var e;return t===d.Z.POINT||t===d.Z.MULTI_POINT?e=L:t===d.Z.LINE_STRING||t===d.Z.MULTI_LINE_STRING?e=S:t===d.Z.POLYGON||t===d.Z.MULTI_POLYGON?e=Z:t===d.Z.CIRCLE&&(e=I),e}(this.type_),this.stopClick_=!!e.stopClick,this.minPoints_=e.minPoints?e.minPoints:this.mode_===Z?3:2,this.maxPoints_=e.maxPoints?e.maxPoints:1/0,this.finishCondition_=e.finishCondition?e.finishCondition:c.uX;var r,o=e.geometryFunction;if(!o)if(this.type_===d.Z.CIRCLE)o=function(t,e){var i=e||new p.Z([NaN,NaN]),r=(0,h.bI)(t[0],t[1]);return i.setCenterAndRadius(t[0],Math.sqrt(r)),i};else{var n,s=this.mode_;s===L?n=C.Z:s===S?n=g.Z:s===Z&&(n=x.ZP),o=function(t,e){var i=e;return i?s===Z?t[0].length?i.setCoordinates([t[0].concat([t[0][0]])]):i.setCoordinates([]):i.setCoordinates(t):i=new n(t),i}}this.geometryFunction_=o,this.dragVertexDelay_=void 0!==e.dragVertexDelay?e.dragVertexDelay:500,this.finishCoordinate_=null,this.sketchFeature_=null,this.sketchPoint_=null,this.sketchCoords_=null,this.sketchLine_=null,this.sketchLineCoords_=null,this.squaredClickTolerance_=e.clickTolerance?e.clickTolerance*e.clickTolerance:36,this.overlay_=new T.Z({source:new w.Z({useSpatialIndex:!1,wrapX:!!e.wrapX&&e.wrapX}),style:e.style?e.style:(r=(0,P.createEditingStyle)(),function(t,e){return r[t.getGeometry().getType()]}),updateWhileInteracting:!0}),this.geometryName_=e.geometryName,this.condition_=e.condition?e.condition:_.rM,this.freehandCondition_,e.freehand?this.freehandCondition_=_.Bx:this.freehandCondition_=e.freehandCondition?e.freehandCondition:_.vY,(0,u.oL)(this,(0,a.v_)(E.Z.ACTIVE),this.updateState_,this)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.setMap=function(e){t.prototype.setMap.call(this,e),this.updateState_()},e.prototype.getOverlay=function(){return this.overlay_},e.prototype.handleEvent=function(e){e.originalEvent.type===r.Z.CONTEXTMENU&&e.preventDefault(),this.freehand_=this.mode_!==L&&this.freehandCondition_(e);var i=e.type===n.Z.POINTERMOVE,o=!0;return!this.freehand_&&this.lastDragTime_&&e.type===n.Z.POINTERDRAG&&(Date.now()-this.lastDragTime_>=this.dragVertexDelay_?(this.downPx_=e.pixel,this.shouldHandle_=!this.freehand_,i=!0):this.lastDragTime_=void 0,this.shouldHandle_&&void 0!==this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0)),this.freehand_&&e.type===n.Z.POINTERDRAG&&null!==this.sketchFeature_?(this.addToDrawing_(e),o=!1):this.freehand_&&e.type===n.Z.POINTERDOWN?o=!1:i?(o=e.type===n.Z.POINTERMOVE)&&this.freehand_?o=this.handlePointerMove_(e):(e.pointerEvent.pointerType==m.T2||e.type===n.Z.POINTERDRAG&&void 0===this.downTimeout_)&&this.handlePointerMove_(e):e.type===n.Z.DBLCLICK&&(o=!1),t.prototype.handleEvent.call(this,e)&&o},e.prototype.handleDownEvent=function(t){return this.shouldHandle_=!this.freehand_,this.freehand_?(this.downPx_=t.pixel,this.finishCoordinate_||this.startDrawing_(t),!0):!!this.condition_(t)&&(this.lastDragTime_=Date.now(),this.downTimeout_=setTimeout(function(){this.handlePointerMove_(new s.Z(n.Z.POINTERMOVE,t.map,t.pointerEvent,!1,t.frameState))}.bind(this),this.dragVertexDelay_),this.downPx_=t.pixel,!0)},e.prototype.handleUpEvent=function(t){var e=!0;this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0),this.handlePointerMove_(t);var i=this.mode_===I;return this.shouldHandle_?(this.finishCoordinate_?this.freehand_||i?this.finishDrawing():this.atFinish_(t)?this.finishCondition_(t)&&this.finishDrawing():this.addToDrawing_(t):(this.startDrawing_(t),this.mode_===L&&this.finishDrawing()),e=!1):this.freehand_&&(this.finishCoordinate_=null,this.abortDrawing_()),!e&&this.stopClick_&&t.stopPropagation(),e},e.prototype.handlePointerMove_=function(t){if(this.downPx_&&(!this.freehand_&&this.shouldHandle_||this.freehand_&&!this.shouldHandle_)){var e=this.downPx_,i=t.pixel,r=e[0]-i[0],o=e[1]-i[1],n=r*r+o*o;if(this.shouldHandle_=this.freehand_?n>this.squaredClickTolerance_:n<=this.squaredClickTolerance_,!this.shouldHandle_)return!0}return this.finishCoordinate_?this.modifyDrawing_(t):this.createOrUpdateSketchPoint_(t),!0},e.prototype.atFinish_=function(t){var e=!1;if(this.sketchFeature_){var i=!1,r=[this.finishCoordinate_];if(this.mode_===S)i=this.sketchCoords_.length>this.minPoints_;else if(this.mode_===Z){var o=this.sketchCoords_;i=o[0].length>this.minPoints_,r=[o[0][0],o[0][o[0].length-2]]}if(i)for(var n=t.map,s=0,a=r.length;s<a;s++){var h=r[s],u=n.getPixelFromCoordinate(h),l=t.pixel,_=l[0]-u[0],c=l[1]-u[1],p=this.freehand_?1:this.snapTolerance_;if(e=Math.sqrt(_*_+c*c)<=p){this.finishCoordinate_=h;break}}}return e},e.prototype.createOrUpdateSketchPoint_=function(t){var e=t.coordinate.slice();this.sketchPoint_?this.sketchPoint_.getGeometry().setCoordinates(e):(this.sketchPoint_=new o.Z(new C.Z(e)),this.updateSketchFeatures_())},e.prototype.startDrawing_=function(t){var e=t.coordinate;this.finishCoordinate_=e,this.mode_===L?this.sketchCoords_=e.slice():this.mode_===Z?(this.sketchCoords_=[[e.slice(),e.slice()]],this.sketchLineCoords_=this.sketchCoords_[0]):this.sketchCoords_=[e.slice(),e.slice()],this.sketchLineCoords_&&(this.sketchLine_=new o.Z(new g.Z(this.sketchLineCoords_)));var i=this.geometryFunction_(this.sketchCoords_);this.sketchFeature_=new o.Z,this.geometryName_&&this.sketchFeature_.setGeometryName(this.geometryName_),this.sketchFeature_.setGeometry(i),this.updateSketchFeatures_(),this.dispatchEvent(new k(G,this.sketchFeature_))},e.prototype.modifyDrawing_=function(t){var e,i,r,n=t.coordinate,s=this.sketchFeature_.getGeometry();if(this.mode_===L?i=this.sketchCoords_:this.mode_===Z?(i=(e=this.sketchCoords_[0])[e.length-1],this.atFinish_(t)&&(n=this.finishCoordinate_.slice())):i=(e=this.sketchCoords_)[e.length-1],i[0]=n[0],i[1]=n[1],this.geometryFunction_(this.sketchCoords_,s),this.sketchPoint_&&this.sketchPoint_.getGeometry().setCoordinates(n),s.getType()==d.Z.POLYGON&&this.mode_!==Z){this.sketchLine_||(this.sketchLine_=new o.Z);var a=s.getLinearRing(0);(r=this.sketchLine_.getGeometry())?(r.setFlatCoordinates(a.getLayout(),a.getFlatCoordinates()),r.changed()):(r=new g.Z(a.getFlatCoordinates(),a.getLayout()),this.sketchLine_.setGeometry(r))}else this.sketchLineCoords_&&(r=this.sketchLine_.getGeometry()).setCoordinates(this.sketchLineCoords_);this.updateSketchFeatures_()},e.prototype.addToDrawing_=function(t){var e,i,r=t.coordinate,o=this.sketchFeature_.getGeometry();this.mode_===S?(this.finishCoordinate_=r.slice(),(i=this.sketchCoords_).length>=this.maxPoints_&&(this.freehand_?i.pop():e=!0),i.push(r.slice()),this.geometryFunction_(i,o)):this.mode_===Z&&((i=this.sketchCoords_[0]).length>=this.maxPoints_&&(this.freehand_?i.pop():e=!0),i.push(r.slice()),e&&(this.finishCoordinate_=i[0]),this.geometryFunction_(this.sketchCoords_,o)),this.updateSketchFeatures_(),e&&this.finishDrawing()},e.prototype.removeLastPoint=function(){if(this.sketchFeature_){var t,e=this.sketchFeature_.getGeometry();this.mode_===S?((t=this.sketchCoords_).splice(-2,1),this.geometryFunction_(t,e),t.length>=2&&(this.finishCoordinate_=t[t.length-2].slice())):this.mode_===Z&&((t=this.sketchCoords_[0]).splice(-2,1),this.sketchLine_.getGeometry().setCoordinates(t),this.geometryFunction_(this.sketchCoords_,e)),0===t.length&&(this.finishCoordinate_=null),this.updateSketchFeatures_()}},e.prototype.finishDrawing=function(){var t=this.abortDrawing_();if(t){var e=this.sketchCoords_,i=t.getGeometry();this.mode_===S?(e.pop(),this.geometryFunction_(e,i)):this.mode_===Z&&(e[0].pop(),this.geometryFunction_(e,i),e=i.getCoordinates()),this.type_===d.Z.MULTI_POINT?t.setGeometry(new y.Z([e])):this.type_===d.Z.MULTI_LINE_STRING?t.setGeometry(new f.Z([e])):this.type_===d.Z.MULTI_POLYGON&&t.setGeometry(new v.Z([e])),this.dispatchEvent(new k("drawend",t)),this.features_&&this.features_.push(t),this.source_&&this.source_.addFeature(t)}},e.prototype.abortDrawing_=function(){this.finishCoordinate_=null;var t=this.sketchFeature_;return t&&(this.sketchFeature_=null,this.sketchPoint_=null,this.sketchLine_=null,this.overlay_.getSource().clear(!0)),t},e.prototype.extend=function(t){var e=t.getGeometry();this.sketchFeature_=t,this.sketchCoords_=e.getCoordinates();var i=this.sketchCoords_[this.sketchCoords_.length-1];this.finishCoordinate_=i.slice(),this.sketchCoords_.push(i.slice()),this.updateSketchFeatures_(),this.dispatchEvent(new k(G,this.sketchFeature_))},e.prototype.updateSketchFeatures_=function(){var t=[];this.sketchFeature_&&t.push(this.sketchFeature_),this.sketchLine_&&t.push(this.sketchLine_),this.sketchPoint_&&t.push(this.sketchPoint_);var e=this.overlay_.getSource();e.clear(!0),e.addFeatures(t)},e.prototype.updateState_=function(){var t=this.getMap(),e=this.getActive();t&&e||this.abortDrawing_(),this.overlay_.setMap(e?t:null)},e}(F.Z)},701577:(t,e,i)=>{"use strict";i.d(e,{Z:()=>S});var r=i(949179),o=i(378426),n=i(919629),s=i(623068),a=i(30006),h=i(179682),u=i(690728),l=i(613002),_=i(9520),c=i(173381),p=i(436403),d=i(421915),g=i(28795),f=i(752043),y=i(938024),v=i(429902),m=i(973410),C=i(925753),x=i(273101),F=i(831219),E="modifyend",T=function(t){function e(e,i,r){t.call(this,e),this.features=i,this.mapBrowserEvent=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(_.ZP);function w(t,e){return t.index-e.index}function P(t,e){var i=e.geometry;if(i.getType()===g.Z.CIRCLE){var r=i;if(1===e.index){var o=(0,u.bI)(r.getCenter(),t),n=Math.sqrt(o)-r.getRadius();return n*n}}return(0,u.Bs)(t,e.segment)}function L(t,e){var i=e.geometry;return i.getType()===g.Z.CIRCLE&&1===e.index?i.getClosestPoint(t):(0,u.oL)(t,e.segment)}const S=function(t){function e(e){var i,r;if(t.call(this,e),this.condition_=e.condition?e.condition:p.Xp,this.defaultDeleteCondition_=function(t){return(0,p.Ko)(t)&&(0,p.Kf)(t)},this.deleteCondition_=e.deleteCondition?e.deleteCondition:this.defaultDeleteCondition_,this.insertVertexCondition_=e.insertVertexCondition?e.insertVertexCondition:p.Bx,this.vertexFeature_=null,this.vertexSegments_=null,this.lastPixel_=[0,0],this.ignoreNextSingleClick_=!1,this.modified_=!1,this.rBush_=new x.Z,this.pixelTolerance_=void 0!==e.pixelTolerance?e.pixelTolerance:10,this.snappedToVertex_=!1,this.changingFeature_=!1,this.dragSegments_=[],this.overlay_=new v.Z({source:new m.Z({useSpatialIndex:!1,wrapX:!!e.wrapX}),style:e.style?e.style:(i=(0,F.createEditingStyle)(),function(t,e){return i[g.Z.POINT]}),updateWhileAnimating:!0,updateWhileInteracting:!0}),this.SEGMENT_WRITERS_={Point:this.writePointGeometry_,LineString:this.writeLineStringGeometry_,LinearRing:this.writeLineStringGeometry_,Polygon:this.writePolygonGeometry_,MultiPoint:this.writeMultiPointGeometry_,MultiLineString:this.writeMultiLineStringGeometry_,MultiPolygon:this.writeMultiPolygonGeometry_,Circle:this.writeCircleGeometry_,GeometryCollection:this.writeGeometryCollectionGeometry_},this.source_=null,e.source?(this.source_=e.source,r=new o.Z(this.source_.getFeatures()),(0,l.oL)(this.source_,C.Z.ADDFEATURE,this.handleSourceAdd_,this),(0,l.oL)(this.source_,C.Z.REMOVEFEATURE,this.handleSourceRemove_,this)):r=e.features,!r)throw new Error("The modify interaction requires features or a source");this.features_=r,this.features_.forEach(this.addFeature_.bind(this)),(0,l.oL)(this.features_,n.Z.ADD,this.handleFeatureAdd_,this),(0,l.oL)(this.features_,n.Z.REMOVE,this.handleFeatureRemove_,this),this.lastPointerEvent_=null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.addFeature_=function(t){var e=t.getGeometry();e&&e.getType()in this.SEGMENT_WRITERS_&&this.SEGMENT_WRITERS_[e.getType()].call(this,t,e);var i=this.getMap();i&&i.isRendered()&&this.getActive()&&this.handlePointerAtPixel_(this.lastPixel_,i),(0,l.oL)(t,c.Z.CHANGE,this.handleFeatureChange_,this)},e.prototype.willModifyFeatures_=function(t){this.modified_||(this.modified_=!0,this.dispatchEvent(new T("modifystart",this.features_,t)))},e.prototype.removeFeature_=function(t){this.removeFeatureSegmentData_(t),this.vertexFeature_&&0===this.features_.getLength()&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),(0,l.Ev)(t,c.Z.CHANGE,this.handleFeatureChange_,this)},e.prototype.removeFeatureSegmentData_=function(t){var e=this.rBush_,i=[];e.forEach((function(e){t===e.feature&&i.push(e)}));for(var r=i.length-1;r>=0;--r)e.remove(i[r])},e.prototype.setActive=function(e){this.vertexFeature_&&!e&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),t.prototype.setActive.call(this,e)},e.prototype.setMap=function(e){this.overlay_.setMap(e),t.prototype.setMap.call(this,e)},e.prototype.getOverlay=function(){return this.overlay_},e.prototype.handleSourceAdd_=function(t){t.feature&&this.features_.push(t.feature)},e.prototype.handleSourceRemove_=function(t){t.feature&&this.features_.remove(t.feature)},e.prototype.handleFeatureAdd_=function(t){this.addFeature_(t.element)},e.prototype.handleFeatureChange_=function(t){if(!this.changingFeature_){var e=t.target;this.removeFeature_(e),this.addFeature_(e)}},e.prototype.handleFeatureRemove_=function(t){var e=t.element;this.removeFeature_(e)},e.prototype.writePointGeometry_=function(t,e){var i=e.getCoordinates(),r={feature:t,geometry:e,segment:[i,i]};this.rBush_.insert(e.getExtent(),r)},e.prototype.writeMultiPointGeometry_=function(t,e){for(var i=e.getCoordinates(),r=0,o=i.length;r<o;++r){var n=i[r],s={feature:t,geometry:e,depth:[r],index:r,segment:[n,n]};this.rBush_.insert(e.getExtent(),s)}},e.prototype.writeLineStringGeometry_=function(t,e){for(var i=e.getCoordinates(),r=0,o=i.length-1;r<o;++r){var n=i.slice(r,r+2),s={feature:t,geometry:e,index:r,segment:n};this.rBush_.insert((0,d.hI)(n),s)}},e.prototype.writeMultiLineStringGeometry_=function(t,e){for(var i=e.getCoordinates(),r=0,o=i.length;r<o;++r)for(var n=i[r],s=0,a=n.length-1;s<a;++s){var h=n.slice(s,s+2),u={feature:t,geometry:e,depth:[r],index:s,segment:h};this.rBush_.insert((0,d.hI)(h),u)}},e.prototype.writePolygonGeometry_=function(t,e){for(var i=e.getCoordinates(),r=0,o=i.length;r<o;++r)for(var n=i[r],s=0,a=n.length-1;s<a;++s){var h=n.slice(s,s+2),u={feature:t,geometry:e,depth:[r],index:s,segment:h};this.rBush_.insert((0,d.hI)(h),u)}},e.prototype.writeMultiPolygonGeometry_=function(t,e){for(var i=e.getCoordinates(),r=0,o=i.length;r<o;++r)for(var n=i[r],s=0,a=n.length;s<a;++s)for(var h=n[s],u=0,l=h.length-1;u<l;++u){var _=h.slice(u,u+2),c={feature:t,geometry:e,depth:[s,r],index:u,segment:_};this.rBush_.insert((0,d.hI)(_),c)}},e.prototype.writeCircleGeometry_=function(t,e){var i=e.getCenter(),r={feature:t,geometry:e,index:0,segment:[i,i]},o={feature:t,geometry:e,index:1,segment:[i,i]},n=[r,o];r.featureSegments=o.featureSegments=n,this.rBush_.insert((0,d.HK)(i),r),this.rBush_.insert(e.getExtent(),o)},e.prototype.writeGeometryCollectionGeometry_=function(t,e){for(var i=e.getGeometriesArray(),r=0;r<i.length;++r)this.SEGMENT_WRITERS_[i[r].getType()].call(this,t,i[r])},e.prototype.createOrUpdateVertexFeature_=function(t){var e=this.vertexFeature_;return e?e.getGeometry().setCoordinates(t):(e=new s.Z(new f.Z(t)),this.vertexFeature_=e,this.overlay_.getSource().addFeature(e)),e},e.prototype.handleEvent=function(e){return!e.pointerEvent||(this.lastPointerEvent_=e,e.map.getView().getInteracting()||e.type!=a.Z.POINTERMOVE||this.handlingDownUpSequence||this.handlePointerMove_(e),this.vertexFeature_&&this.deleteCondition_(e)&&(i=!(e.type!=a.Z.SINGLECLICK||!this.ignoreNextSingleClick_)||this.removePoint()),e.type==a.Z.SINGLECLICK&&(this.ignoreNextSingleClick_=!1),t.prototype.handleEvent.call(this,e)&&!i);var i},e.prototype.handleDragEvent=function(t){this.ignoreNextSingleClick_=!1,this.willModifyFeatures_(t);for(var e=t.coordinate,i=0,r=this.dragSegments_.length;i<r;++i){for(var o=this.dragSegments_[i],n=o[0],s=n.depth,a=n.geometry,h=void 0,l=n.segment,_=o[1];e.length<a.getStride();)e.push(l[_][e.length]);switch(a.getType()){case g.Z.POINT:h=e,l[0]=l[1]=e;break;case g.Z.MULTI_POINT:(h=a.getCoordinates())[n.index]=e,l[0]=l[1]=e;break;case g.Z.LINE_STRING:(h=a.getCoordinates())[n.index+_]=e,l[_]=e;break;case g.Z.MULTI_LINE_STRING:case g.Z.POLYGON:(h=a.getCoordinates())[s[0]][n.index+_]=e,l[_]=e;break;case g.Z.MULTI_POLYGON:(h=a.getCoordinates())[s[1]][s[0]][n.index+_]=e,l[_]=e;break;case g.Z.CIRCLE:l[0]=l[1]=e,0===n.index?(this.changingFeature_=!0,a.setCenter(e),this.changingFeature_=!1):(this.changingFeature_=!0,a.setRadius((0,u.TE)(a.getCenter(),e)),this.changingFeature_=!1)}h&&this.setGeometryCoordinates_(a,h)}this.createOrUpdateVertexFeature_(e)},e.prototype.handleDownEvent=function(t){if(!this.condition_(t))return!1;this.handlePointerAtPixel_(t.pixel,t.map);var e=t.map.getCoordinateFromPixel(t.pixel);this.dragSegments_.length=0,this.modified_=!1;var i=this.vertexFeature_;if(i){var o=[],n=i.getGeometry().getCoordinates(),s=(0,d.hI)([n]),a=this.rBush_.getInExtent(s),h={};a.sort(w);for(var l=0,_=a.length;l<_;++l){var c=a[l],p=c.segment,f=(0,r.sq)(c.feature),y=c.depth;if(y&&(f+="-"+y.join("-")),h[f]||(h[f]=new Array(2)),c.geometry.getType()===g.Z.CIRCLE&&1===c.index){var v=L(e,c);(0,u.fS)(v,n)&&!h[f][0]&&(this.dragSegments_.push([c,0]),h[f][0]=c)}else if((0,u.fS)(p[0],n)&&!h[f][0])this.dragSegments_.push([c,0]),h[f][0]=c;else if((0,u.fS)(p[1],n)&&!h[f][1]){if((c.geometry.getType()===g.Z.LINE_STRING||c.geometry.getType()===g.Z.MULTI_LINE_STRING)&&h[f][0]&&0===h[f][0].index)continue;this.dragSegments_.push([c,1]),h[f][1]=c}else this.insertVertexCondition_(t)&&(0,r.sq)(p)in this.vertexSegments_&&!h[f][0]&&!h[f][1]&&o.push([c,n])}o.length&&this.willModifyFeatures_(t);for(var m=o.length-1;m>=0;--m)this.insertVertex_.apply(this,o[m])}return!!this.vertexFeature_},e.prototype.handleUpEvent=function(t){for(var e=this.dragSegments_.length-1;e>=0;--e){var i=this.dragSegments_[e][0],r=i.geometry;if(r.getType()===g.Z.CIRCLE){var o=r.getCenter(),n=i.featureSegments[0],s=i.featureSegments[1];n.segment[0]=n.segment[1]=o,s.segment[0]=s.segment[1]=o,this.rBush_.update((0,d.HK)(o),n),this.rBush_.update(r.getExtent(),s)}else this.rBush_.update((0,d.hI)(i.segment),i)}return this.modified_&&(this.dispatchEvent(new T(E,this.features_,t)),this.modified_=!1),!1},e.prototype.handlePointerMove_=function(t){this.lastPixel_=t.pixel,this.handlePointerAtPixel_(t.pixel,t.map)},e.prototype.handlePointerAtPixel_=function(t,e){var i=e.getCoordinateFromPixel(t),o=(0,d.f3)((0,d.HK)(i),e.getView().getResolution()*this.pixelTolerance_),n=this.rBush_.getInExtent(o);if(n.length>0){n.sort((function(t,e){return P(i,t)-P(i,e)}));var s=n[0],a=s.segment,h=L(i,s),l=e.getPixelFromCoordinate(h),_=(0,u.TE)(t,l);if(_<=this.pixelTolerance_){var c={};if(s.geometry.getType()===g.Z.CIRCLE&&1===s.index)this.snappedToVertex_=!0,this.createOrUpdateVertexFeature_(h);else{var p=e.getPixelFromCoordinate(a[0]),f=e.getPixelFromCoordinate(a[1]),y=(0,u.bI)(l,p),v=(0,u.bI)(l,f);_=Math.sqrt(Math.min(y,v)),this.snappedToVertex_=_<=this.pixelTolerance_,this.snappedToVertex_&&(h=y>v?a[1]:a[0]),this.createOrUpdateVertexFeature_(h);for(var m=1,C=n.length;m<C;++m){var x=n[m].segment;if(!((0,u.fS)(a[0],x[0])&&(0,u.fS)(a[1],x[1])||(0,u.fS)(a[0],x[1])&&(0,u.fS)(a[1],x[0])))break;c[(0,r.sq)(x)]=!0}}return c[(0,r.sq)(a)]=!0,void(this.vertexSegments_=c)}}this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null)},e.prototype.insertVertex_=function(t,e){for(var i,r=t.segment,o=t.feature,n=t.geometry,s=t.depth,a=t.index;e.length<n.getStride();)e.push(0);switch(n.getType()){case g.Z.MULTI_LINE_STRING:case g.Z.POLYGON:(i=n.getCoordinates())[s[0]].splice(a+1,0,e);break;case g.Z.MULTI_POLYGON:(i=n.getCoordinates())[s[1]][s[0]].splice(a+1,0,e);break;case g.Z.LINE_STRING:(i=n.getCoordinates()).splice(a+1,0,e);break;default:return}this.setGeometryCoordinates_(n,i);var h=this.rBush_;h.remove(t),this.updateSegmentIndices_(n,a,s,1);var u={segment:[r[0],e],feature:o,geometry:n,depth:s,index:a};h.insert((0,d.hI)(u.segment),u),this.dragSegments_.push([u,1]);var l={segment:[e,r[1]],feature:o,geometry:n,depth:s,index:a+1};h.insert((0,d.hI)(l.segment),l),this.dragSegments_.push([l,0]),this.ignoreNextSingleClick_=!0},e.prototype.removePoint=function(){if(this.lastPointerEvent_&&this.lastPointerEvent_.type!=a.Z.POINTERDRAG){var t=this.lastPointerEvent_;return this.willModifyFeatures_(t),this.removeVertex_(),this.dispatchEvent(new T(E,this.features_,t)),this.modified_=!1,!0}return!1},e.prototype.removeVertex_=function(){var t,e,i,o,n,s,a,h,u,l,_,c=this.dragSegments_,p={},f=!1;for(n=c.length-1;n>=0;--n)l=(i=c[n])[0],_=(0,r.sq)(l.feature),l.depth&&(_+="-"+l.depth.join("-")),_ in p||(p[_]={}),0===i[1]?(p[_].right=l,p[_].index=l.index):1==i[1]&&(p[_].left=l,p[_].index=l.index+1);for(_ in p){switch(u=p[_].right,a=p[_].left,(h=(s=p[_].index)-1)<0&&(h=0),t=e=(o=(l=void 0!==a?a:u).geometry).getCoordinates(),f=!1,o.getType()){case g.Z.MULTI_LINE_STRING:e[l.depth[0]].length>2&&(e[l.depth[0]].splice(s,1),f=!0);break;case g.Z.LINE_STRING:e.length>2&&(e.splice(s,1),f=!0);break;case g.Z.MULTI_POLYGON:t=t[l.depth[1]];case g.Z.POLYGON:(t=t[l.depth[0]]).length>4&&(s==t.length-1&&(s=0),t.splice(s,1),f=!0,0===s&&(t.pop(),t.push(t[0]),h=t.length-1))}if(f){this.setGeometryCoordinates_(o,e);var y=[];if(void 0!==a&&(this.rBush_.remove(a),y.push(a.segment[0])),void 0!==u&&(this.rBush_.remove(u),y.push(u.segment[1])),void 0!==a&&void 0!==u){var v={depth:l.depth,feature:l.feature,geometry:l.geometry,index:h,segment:y};this.rBush_.insert((0,d.hI)(v.segment),v)}this.updateSegmentIndices_(o,s,l.depth,-1),this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),c.length=0}}return f},e.prototype.setGeometryCoordinates_=function(t,e){this.changingFeature_=!0,t.setCoordinates(e),this.changingFeature_=!1},e.prototype.updateSegmentIndices_=function(t,e,i,r){this.rBush_.forEachInExtent(t.getExtent(),(function(o){o.geometry===t&&(void 0===i||void 0===o.depth||(0,h.fS)(o.depth,i))&&o.index>e&&(o.index+=r)}))},e}(y.Z)},51273:(t,e,i)=>{"use strict";i.d(e,{Z:()=>v});var r=i(949179),o=i(919629),n=i(179682),s=i(613002),a=i(9520),h=i(436403),u=i(864011),l=i(28795),_=i(247588),c=i(429902),p=i(913580),d=i(973410),g=i(831219),f=function(t){function e(e,i,r,o){t.call(this,e),this.selected=i,this.deselected=r,this.mapBrowserEvent=o}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(a.ZP);function y(t){if(!this.condition_(t))return!0;var e=this.addCondition_(t),i=this.removeCondition_(t),r=this.toggleCondition_(t),o=!e&&!i&&!r,s=t.map,a=this.getFeatures(),u=[],l=[];if(o){(0,p.ZH)(this.featureLayerAssociation_),s.forEachFeatureAtPixel(t.pixel,function(t,e){if(this.filter_(t,e))return l.push(t),this.addFeatureLayerAssociation_(t,e),!this.multi_}.bind(this),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(var _=a.getLength()-1;_>=0;--_){var c=a.item(_),d=l.indexOf(c);d>-1?l.splice(d,1):(a.remove(c),u.push(c))}0!==l.length&&a.extend(l)}else{s.forEachFeatureAtPixel(t.pixel,function(t,o){if(this.filter_(t,o))return!e&&!r||(0,n.q9)(a.getArray(),t)?(i||r)&&(0,n.q9)(a.getArray(),t)&&(u.push(t),this.removeFeatureLayerAssociation_(t)):(l.push(t),this.addFeatureLayerAssociation_(t,o)),!this.multi_}.bind(this),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(var g=u.length-1;g>=0;--g)a.remove(u[g]);a.extend(l)}return(l.length>0||u.length>0)&&this.dispatchEvent(new f("select",l,u,t)),(0,h.MJ)(t)}const v=function(t){function e(e){t.call(this,{handleEvent:y});var i=e||{};this.condition_=i.condition?i.condition:h.Kf,this.addCondition_=i.addCondition?i.addCondition:h.Fi,this.removeCondition_=i.removeCondition?i.removeCondition:h.Fi,this.toggleCondition_=i.toggleCondition?i.toggleCondition:h.vY,this.multi_=!!i.multi&&i.multi,this.filter_=i.filter?i.filter:u.uX,this.hitTolerance_=i.hitTolerance?i.hitTolerance:0;var r,a,_=new c.Z({source:new d.Z({useSpatialIndex:!1,features:i.features,wrapX:i.wrapX}),style:i.style?i.style:(a=(0,g.createEditingStyle)(),(0,n.l7)(a[l.Z.POLYGON],a[l.Z.LINE_STRING]),(0,n.l7)(a[l.Z.GEOMETRY_COLLECTION],a[l.Z.LINE_STRING]),function(t,e){return t.getGeometry()?a[t.getGeometry().getType()]:null}),updateWhileAnimating:!0,updateWhileInteracting:!0});if(this.featureOverlay_=_,i.layers)if("function"==typeof i.layers)r=i.layers;else{var p=i.layers;r=function(t){return(0,n.q9)(p,t)}}else r=u.uX;this.layerFilter_=r,this.featureLayerAssociation_={};var f=this.getFeatures();(0,s.oL)(f,o.Z.ADD,this.addFeature_,this),(0,s.oL)(f,o.Z.REMOVE,this.removeFeature_,this)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.addFeatureLayerAssociation_=function(t,e){this.featureLayerAssociation_[(0,r.sq)(t)]=e},e.prototype.getFeatures=function(){return this.featureOverlay_.getSource().getFeaturesCollection()},e.prototype.getHitTolerance=function(){return this.hitTolerance_},e.prototype.getLayer=function(t){return this.featureLayerAssociation_[(0,r.sq)(t)]},e.prototype.getOverlay=function(){return this.featureOverlay_},e.prototype.setHitTolerance=function(t){this.hitTolerance_=t},e.prototype.setMap=function(e){var i=this.getMap(),r=this.getFeatures();i&&r.forEach(i.unskipFeature.bind(i)),t.prototype.setMap.call(this,e),this.featureOverlay_.setMap(e),e&&r.forEach(e.skipFeature.bind(e))},e.prototype.addFeature_=function(t){var e=this.getMap();e&&e.skipFeature(t.element)},e.prototype.removeFeature_=function(t){var e=this.getMap();e&&e.unskipFeature(t.element)},e.prototype.removeFeatureLayerAssociation_=function(t){delete this.featureLayerAssociation_[(0,r.sq)(t)]},e}(_.ZP)},650141:(t,e,i)=>{"use strict";i.d(e,{Z:()=>v});var r=i(949179),o=i(919629),n=i(690728),s=i(613002),a=i(173381),h=i(421915),u=i(864011),l=i(28795),_=i(640353),c=i(938024),p=i(913580),d=i(925753),g=i(273101);function f(t){return t.feature?t.feature:t.element?t.element:void 0}function y(t,e){return(0,n.Bs)(this.pixelCoordinate_,t.segment)-(0,n.Bs)(this.pixelCoordinate_,e.segment)}const v=function(t){function e(e){var i=e||{},r=i;r.handleDownEvent||(r.handleDownEvent=u.uX),r.stopDown||(r.stopDown=u.Dv),t.call(this,r),this.source_=i.source?i.source:null,this.vertex_=void 0===i.vertex||i.vertex,this.edge_=void 0===i.edge||i.edge,this.features_=i.features?i.features:null,this.featuresListenerKeys_=[],this.featureChangeListenerKeys_={},this.indexedFeaturesExtents_={},this.pendingFeatures_={},this.pixelCoordinate_=null,this.pixelTolerance_=void 0!==i.pixelTolerance?i.pixelTolerance:10,this.sortByDistance_=y.bind(this),this.rBush_=new g.Z,this.SEGMENT_WRITERS_={Point:this.writePointGeometry_,LineString:this.writeLineStringGeometry_,LinearRing:this.writeLineStringGeometry_,Polygon:this.writePolygonGeometry_,MultiPoint:this.writeMultiPointGeometry_,MultiLineString:this.writeMultiLineStringGeometry_,MultiPolygon:this.writeMultiPolygonGeometry_,GeometryCollection:this.writeGeometryCollectionGeometry_,Circle:this.writeCircleGeometry_}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.addFeature=function(t,e){var i=void 0===e||e,o=(0,r.sq)(t),n=t.getGeometry();if(n){var u=this.SEGMENT_WRITERS_[n.getType()];u&&(this.indexedFeaturesExtents_[o]=n.getExtent((0,h.lJ)()),u.call(this,t,n))}i&&(this.featureChangeListenerKeys_[o]=(0,s.oL)(t,a.Z.CHANGE,this.handleFeatureChange_,this))},e.prototype.forEachFeatureAdd_=function(t){this.addFeature(t)},e.prototype.forEachFeatureRemove_=function(t){this.removeFeature(t)},e.prototype.getFeatures_=function(){var t;return this.features_?t=this.features_:this.source_&&(t=this.source_.getFeatures()),t},e.prototype.handleEvent=function(e){var i=this.snapTo(e.pixel,e.coordinate,e.map);return i.snapped&&(e.coordinate=i.vertex.slice(0,2),e.pixel=i.vertexPixel),t.prototype.handleEvent.call(this,e)},e.prototype.handleFeatureAdd_=function(t){var e=f(t);this.addFeature(e)},e.prototype.handleFeatureRemove_=function(t){var e=f(t);this.removeFeature(e)},e.prototype.handleFeatureChange_=function(t){var e=t.target;if(this.handlingDownUpSequence){var i=(0,r.sq)(e);i in this.pendingFeatures_||(this.pendingFeatures_[i]=e)}else this.updateFeature_(e)},e.prototype.handleUpEvent=function(t){var e=(0,p.KX)(this.pendingFeatures_);return e.length&&(e.forEach(this.updateFeature_.bind(this)),this.pendingFeatures_={}),!1},e.prototype.removeFeature=function(t,e){var i=void 0===e||e,o=(0,r.sq)(t),n=this.indexedFeaturesExtents_[o];if(n){var a=this.rBush_,h=[];a.forEachInExtent(n,(function(e){t===e.feature&&h.push(e)}));for(var u=h.length-1;u>=0;--u)a.remove(h[u])}i&&((0,s.bN)(this.featureChangeListenerKeys_[o]),delete this.featureChangeListenerKeys_[o])},e.prototype.setMap=function(e){var i=this.getMap(),r=this.featuresListenerKeys_,n=this.getFeatures_();i&&(r.forEach(s.bN),r.length=0,n.forEach(this.forEachFeatureRemove_.bind(this))),t.prototype.setMap.call(this,e),e&&(this.features_?r.push((0,s.oL)(this.features_,o.Z.ADD,this.handleFeatureAdd_,this),(0,s.oL)(this.features_,o.Z.REMOVE,this.handleFeatureRemove_,this)):this.source_&&r.push((0,s.oL)(this.source_,d.Z.ADDFEATURE,this.handleFeatureAdd_,this),(0,s.oL)(this.source_,d.Z.REMOVEFEATURE,this.handleFeatureRemove_,this)),n.forEach(this.forEachFeatureAdd_.bind(this)))},e.prototype.snapTo=function(t,e,i){var r=i.getCoordinateFromPixel([t[0]-this.pixelTolerance_,t[1]+this.pixelTolerance_]),o=i.getCoordinateFromPixel([t[0]+this.pixelTolerance_,t[1]-this.pixelTolerance_]),s=(0,h.hI)([r,o]),a=this.rBush_.getInExtent(s);this.vertex_&&!this.edge_&&(a=a.filter((function(t){return t.feature.getGeometry().getType()!==l.Z.CIRCLE})));var u,_,c,p,d=!1,g=null,f=null;if(a.length>0){this.pixelCoordinate_=e,a.sort(this.sortByDistance_);var y=a[0].segment,v=a[0].feature.getGeometry().getType()===l.Z.CIRCLE;this.vertex_&&!this.edge_?(u=i.getPixelFromCoordinate(y[0]),_=i.getPixelFromCoordinate(y[1]),c=(0,n.bI)(t,u),p=(0,n.bI)(t,_),Math.sqrt(Math.min(c,p))<=this.pixelTolerance_&&(d=!0,g=c>p?y[1]:y[0],f=i.getPixelFromCoordinate(g))):this.edge_&&(g=v?(0,n.Ed)(e,a[0].feature.getGeometry()):(0,n.oL)(e,y),f=i.getPixelFromCoordinate(g),(0,n.TE)(t,f)<=this.pixelTolerance_&&(d=!0,this.vertex_&&!v&&(u=i.getPixelFromCoordinate(y[0]),_=i.getPixelFromCoordinate(y[1]),c=(0,n.bI)(f,u),p=(0,n.bI)(f,_),Math.sqrt(Math.min(c,p))<=this.pixelTolerance_&&(g=c>p?y[1]:y[0],f=i.getPixelFromCoordinate(g))))),d&&(f=[Math.round(f[0]),Math.round(f[1])])}return{snapped:d,vertex:g,vertexPixel:f}},e.prototype.updateFeature_=function(t){this.removeFeature(t,!1),this.addFeature(t,!1)},e.prototype.writeCircleGeometry_=function(t,e){for(var i=(0,_.Bb)(e).getCoordinates()[0],r=0,o=i.length-1;r<o;++r){var n=i.slice(r,r+2),s={feature:t,segment:n};this.rBush_.insert((0,h.hI)(n),s)}},e.prototype.writeGeometryCollectionGeometry_=function(t,e){for(var i=e.getGeometriesArray(),r=0;r<i.length;++r){var o=this.SEGMENT_WRITERS_[i[r].getType()];o&&o.call(this,t,i[r])}},e.prototype.writeLineStringGeometry_=function(t,e){for(var i=e.getCoordinates(),r=0,o=i.length-1;r<o;++r){var n=i.slice(r,r+2),s={feature:t,segment:n};this.rBush_.insert((0,h.hI)(n),s)}},e.prototype.writeMultiLineStringGeometry_=function(t,e){for(var i=e.getCoordinates(),r=0,o=i.length;r<o;++r)for(var n=i[r],s=0,a=n.length-1;s<a;++s){var u=n.slice(s,s+2),l={feature:t,segment:u};this.rBush_.insert((0,h.hI)(u),l)}},e.prototype.writeMultiPointGeometry_=function(t,e){for(var i=e.getCoordinates(),r=0,o=i.length;r<o;++r){var n=i[r],s={feature:t,segment:[n,n]};this.rBush_.insert(e.getExtent(),s)}},e.prototype.writeMultiPolygonGeometry_=function(t,e){for(var i=e.getCoordinates(),r=0,o=i.length;r<o;++r)for(var n=i[r],s=0,a=n.length;s<a;++s)for(var u=n[s],l=0,_=u.length-1;l<_;++l){var c=u.slice(l,l+2),p={feature:t,segment:c};this.rBush_.insert((0,h.hI)(c),p)}},e.prototype.writePointGeometry_=function(t,e){var i=e.getCoordinates(),r={feature:t,segment:[i,i]};this.rBush_.insert(e.getExtent(),r)},e.prototype.writePolygonGeometry_=function(t,e){for(var i=e.getCoordinates(),r=0,o=i.length;r<o;++r)for(var n=i[r],s=0,a=n.length-1;s<a;++s){var u=n.slice(s,s+2),l={feature:t,segment:u};this.rBush_.insert((0,h.hI)(u),l)}},e}(c.Z)},829194:(t,e,i)=>{"use strict";i.d(e,{Z:()=>c});var r=i(378426),o=i(558493),n=i(613002),s=i(9520),a=i(864011),h=i(179682),u=i(938024),l=i(173604),_=function(t){function e(e,i,r){t.call(this,e),this.features=i,this.coordinate=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(s.ZP);const c=function(t){function e(e){var i,r=e||{};if(t.call(this,r),this.lastCoordinate_=null,this.features_=void 0!==r.features?r.features:null,r.layers)if("function"==typeof r.layers)i=r.layers;else{var s=r.layers;i=function(t){return(0,h.q9)(s,t)}}else i=a.uX;this.layerFilter_=i,this.hitTolerance_=r.hitTolerance?r.hitTolerance:0,this.lastFeature_=null,(0,n.oL)(this,(0,o.v_)(l.Z.ACTIVE),this.handleActiveChanged_,this)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.handleDownEvent=function(t){if(this.lastFeature_=this.featuresAtPixel_(t.pixel,t.map),!this.lastCoordinate_&&this.lastFeature_){this.lastCoordinate_=t.coordinate,this.handleMoveEvent(t);var e=this.features_||new r.Z([this.lastFeature_]);return this.dispatchEvent(new _("translatestart",e,t.coordinate)),!0}return!1},e.prototype.handleUpEvent=function(t){if(this.lastCoordinate_){this.lastCoordinate_=null,this.handleMoveEvent(t);var e=this.features_||new r.Z([this.lastFeature_]);return this.dispatchEvent(new _("translateend",e,t.coordinate)),!0}return!1},e.prototype.handleDragEvent=function(t){if(this.lastCoordinate_){var e=t.coordinate,i=e[0]-this.lastCoordinate_[0],o=e[1]-this.lastCoordinate_[1],n=this.features_||new r.Z([this.lastFeature_]);n.forEach((function(t){var e=t.getGeometry();e.translate(i,o),t.setGeometry(e)})),this.lastCoordinate_=e,this.dispatchEvent(new _("translating",n,e))}},e.prototype.handleMoveEvent=function(t){var e=t.map.getViewport();this.featuresAtPixel_(t.pixel,t.map)?(e.classList.remove(this.lastCoordinate_?"ol-grab":"ol-grabbing"),e.classList.add(this.lastCoordinate_?"ol-grabbing":"ol-grab")):e.classList.remove("ol-grab","ol-grabbing")},e.prototype.featuresAtPixel_=function(t,e){return e.forEachFeatureAtPixel(t,function(t){if(!this.features_||(0,h.q9)(this.features_.getArray(),t))return t}.bind(this),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_})},e.prototype.getHitTolerance=function(){return this.hitTolerance_},e.prototype.setHitTolerance=function(t){this.hitTolerance_=t},e.prototype.setMap=function(e){var i=this.getMap();t.prototype.setMap.call(this,e),this.updateState_(i)},e.prototype.handleActiveChanged_=function(){this.updateState_(null)},e.prototype.updateState_=function(t){var e=this.getMap(),i=this.getActive();e&&i||(e=e||t)&&e.getViewport().classList.remove("ol-grab","ol-grabbing")},e}(u.Z)},634681:(t,e,i)=>{"use strict";i.d(e,{Z:()=>o});var r=function(t,e){this.dispatcher=t,this.mapping_=e};r.prototype.getEvents=function(){return Object.keys(this.mapping_)},r.prototype.getHandlerForEvent=function(t){return this.mapping_[t]};const o=r},468338:(t,e,i)=>{"use strict";i.d(e,{yA:()=>o,T2:()=>n,R:()=>_,ZP:()=>c});var r=i(634681),o=1,n="mouse";function s(t){if(!this.isEventSimulatedFromTouch_(t)){o.toString()in this.pointerMap&&this.cancel(t);var e=_(t,this.dispatcher);this.pointerMap[o.toString()]=t,this.dispatcher.down(e,t)}}function a(t){if(!this.isEventSimulatedFromTouch_(t)){var e=_(t,this.dispatcher);this.dispatcher.move(e,t)}}function h(t){if(!this.isEventSimulatedFromTouch_(t)){var e=this.pointerMap[o.toString()];if(e&&e.button===t.button){var i=_(t,this.dispatcher);this.dispatcher.up(i,t),this.cleanupMouse()}}}function u(t){if(!this.isEventSimulatedFromTouch_(t)){var e=_(t,this.dispatcher);this.dispatcher.enterOver(e,t)}}function l(t){if(!this.isEventSimulatedFromTouch_(t)){var e=_(t,this.dispatcher);this.dispatcher.leaveOut(e,t)}}function _(t,e){var i=e.cloneEvent(t,t),r=i.preventDefault;return i.preventDefault=function(){t.preventDefault(),r()},i.pointerId=o,i.isPrimary=!0,i.pointerType=n,i}const c=function(t){function e(e){var i={mousedown:s,mousemove:a,mouseup:h,mouseover:u,mouseout:l};t.call(this,e,i),this.pointerMap=e.pointerMap,this.lastTouches=[]}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isEventSimulatedFromTouch_=function(t){for(var e=this.lastTouches,i=t.clientX,r=t.clientY,o=0,n=e.length,s=void 0;o<n&&(s=e[o]);o++){var a=Math.abs(i-s[0]),h=Math.abs(r-s[1]);if(a<=25&&h<=25)return!0}return!1},e.prototype.cancel=function(t){var e=_(t,this.dispatcher);this.dispatcher.cancel(e,t),this.cleanupMouse()},e.prototype.cleanupMouse=function(){delete this.pointerMap[o.toString()]},e}(r.Z)}}]);