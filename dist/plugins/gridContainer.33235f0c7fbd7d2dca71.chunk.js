(self.webpackChunkmapstore2=self.webpackChunkmapstore2||[]).push([[794],{956611:(e,t,o)=>{"use strict";o.d(t,{Z:()=>d});var r=o(747037),s=o.n(r),n=o(45697),a=o.n(n),l=o(124852),i=o.n(l),p=o(630294),m=o(719648);function u(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}class c extends i().Component{constructor(){super(...arguments),u(this,"onMouseOver",(()=>{const e=s()(this.props.helpText)?this.props.helpText:(0,m.S$)(this.context.messages,this.props.helpText.props.msgId);this.props.changeHelpText(e),this.props.changeHelpwinVisibility(!0)}))}render(){return i().createElement(p.Badge,{id:this.props.id,onMouseOver:this.onMouseOver,className:(this.props.isVisible?"":"hidden ")+(this.props.className?this.props.className:"")},"?")}}u(c,"propTypes",{id:a().string,helpText:a().oneOfType([a().string,a().element]),isVisible:a().bool,changeHelpText:a().func,changeHelpwinVisibility:a().func,className:a().string}),u(c,"contextTypes",{messages:a().object}),u(c,"defaultProps",{helpText:"",isVisible:!1});const d=c},129125:(e,t,o)=>{"use strict";o.d(t,{ZP:()=>v});var r=o(49977),s=o.n(r),n=o(423570),a=o.n(n),l=o(454295),i=o(556233),p=o(976719),m=o(333101),u=o(363082),c=o(687753),d=o(917450),h=o(119008),g=o(870820),b=o(859518),y=o(172768),E=o(789683),f=o(502422);const v={addAnnotationFromMeasureEpic:(e,t)=>e.ofType(p.XX).switchMap((e=>{const{features:o,textLabels:r,uom:n,save:i,properties:m}=e,{id:d=a()(),visibility:g=!0}=m||{},b={...(0,l.tL)(o,r,n,d,"Annotations created from measurements",u.Eo),newFeature:i,visibility:g};return s().Observable.from([...(0,h.Yq)("annotations")(t.getState())?[]:[(0,c.Xg)("annotations","enabled",!0)],(0,y.A9)(),(0,p.el)("exportToAnnotation",!1),(0,y.yg)(b)])})),addAsLayerEpic:e=>e.ofType(p.Wt).switchMap((e=>{let{features:t,textLabels:o,uom:r}=e;const n=(0,l.tL)(t,o,r,a()());return s().Observable.of((0,m.A4)({type:"vector",id:a()(),name:"Measurements",hideLoading:!0,features:[n],visibility:!0}))})),openMeasureEpic:(e,t)=>e.ofType(c.At,c.kM).filter((e=>"measure"===e.control&&(0,g.JF)(t.getState()))).switchMap((()=>{var e,o;const r=[(0,d.g)(),(0,d.aN)(),(0,b.H0)("click","measure")],{showCoordinateEditor:n}=(null===(e=t.getState())||void 0===e||null===(o=e.controls)||void 0===o?void 0:o.measure)||{};return n&&r.push((0,E.Vd)("measure","add","right")),s().Observable.from(r)})),closeMeasureEpics:(e,t)=>e.ofType(c.At,c.kM).filter((e=>"measure"===e.control&&!(0,h.QF)(t.getState()))).switchMap((()=>{var e,o;const r=[(0,p.Bd)({lineMeasureEnabled:!1,areaMeasureEnabled:!1,bearingMeasureEnabled:!1,geomType:null,len:0,area:0,bearing:0}),(0,y.Rx)(),(0,b.$X)("click","measure")],{showCoordinateEditor:n}=(null===(e=t.getState())||void 0===e||null===(o=e.controls)||void 0===o?void 0:o.measure)||{};return n&&r.push((0,E.Vd)("measure","remove","right")),s().Observable.from(r)})),setMeasureStateFromAnnotationEpic:(e,t)=>e.ofType(p.ES).switchMap((e=>{var o,r;let{features:n,properties:a}=e;const i=(0,g.on)(t.getState())===(null===(o=(0,l.k2)(n))||void 0===o?void 0:o[0]);return s().Observable.of(!i&&(0,p.Bd)({geomType:null===(r=(0,l.k2)(n))||void 0===r?void 0:r[0]}),(0,c.Xg)("measure","enabled",!0),(0,c.Xg)("annotations","enabled",!1),(0,y.r1)(a.id,!1))})),addCoordinatesEpic:(e,t)=>{let{getState:o=(()=>{})}=t;return e.ofType(b.TR).filter((()=>{var e,t;const{showCoordinateEditor:r,enabled:s}=(null===(e=o())||void 0===e||null===(t=e.controls)||void 0===t?void 0:t.measure)||{};return r&&s})).switchMap((e=>{var t,r,n;let{point:a}=e;const{currentFeature:l,features:m=[],geomType:u}=(null===(t=o())||void 0===t?void 0:t.measurement)||{},{lng:c,lat:d}=(null==a?void 0:a.latlng)||{};let h=(null===(r=m[l])||void 0===r||null===(n=r.geometry)||void 0===n?void 0:n.coordinates)||[];h="Polygon"===u?h[0]:h;const g=void 0!==h?h.findIndex((e=>!(0,i.wd)(e))):-1;return-1!==g?(h=h.map((e=>({lon:e[0],lat:e[1]}))),h[g]={lon:c,lat:d},s().Observable.of((0,p.dD)(h))):s().Observable.empty()}))},tearDownMeasureOnDrawToolActive:(e,t)=>(0,f.U)(e,t,"measure")}},303028:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>u});var r=o(45697),s=o.n(r),n=o(124852),a=o.n(n),l=o(630294),i=o(638510);function p(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}class m extends a().Component{constructor(){super(...arguments),p(this,"getPanels",(()=>this.props.items.filter((e=>e.tools)).reduce(((e,t)=>e.concat(t.tools.map(((e,o)=>({name:t.name+o,panel:e,cfg:t.cfg.toolsCfg?t.cfg.toolsCfg[o]:{}}))))),[]))),p(this,"getTools",(()=>this.props.items.sort(((e,t)=>e.position-t.position))))}render(){return a().createElement(i.Z,{id:this.props.id,style:this.props.style,className:this.props.className,mapType:this.props.mapType,container:e=>a().createElement(l.Grid,{fluid:!0},a().createElement(l.Row,null,e.children.map(((e,t)=>a().createElement(l.Col,{key:t,xs:12,xsOffset:0,sm:6,smOffset:3},e))))),toolStyle:"primary",activeStyle:"default",stateSelector:"omnibar",tool:e=>a().createElement("div",null,e.children),tools:this.getTools(),panels:this.getPanels()})}}p(m,"propTypes",{className:s().string,style:s().object,items:s().array,id:s().string,mapType:s().string}),p(m,"defaultProps",{items:[],className:"grid-home-container",style:{},id:"mapstore-grid-home",mapType:"leaflet"});const u={GridContainerPlugin:m,reducers:{}}},522019:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>Y});var r=o(727418),s=o.n(r),n=o(124852),a=o.n(n),l=o(630294),i=o(171703),p=o(22222),m=o(172768),u=o(687753),c=o(976719),d=o(119008),h=o(101092),g=o(870820),b=o(234228),y=o(488400),E=o(843624),f=o.n(E),v=o(227361),C=o.n(v),T=o(618446),M=o.n(T),w=o(59854),S=o.n(w),L=o(45697),x=o.n(L),A=o(200020),O=o(423570),P=o.n(O),k=o(685476),B=o(719648),G=o(454295),j=o(556233),F=o(804504),N=o(913186),Z=o(756435),I=o(8204),R=o(100845);function V(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}o.e(6510).then(o.bind(o,735604));class D extends a().Component{constructor(){var e;super(...arguments),e=this,V(this,"onGeomClick",(e=>{this.props.geomType!==e&&this.props.toggleMeasure({geomType:e})})),V(this,"onResetClick",(()=>{this.props.toggleMeasure({geomType:null})})),V(this,"getToolTips",(()=>({lineToolTip:a().createElement(l.Tooltip,{id:"tooltip-button.line"},this.props.lengthLabel),areaToolTip:a().createElement(l.Tooltip,{id:"tooltip-button.area"},this.props.areaLabel),bearingToolTip:a().createElement(l.Tooltip,{id:"tooltip-button.bearing"},this.isTrueBearing()?this.props.trueBearingLabel:this.props.bearingLabel)}))),V(this,"renderMeasurements",(function(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],o={style:"decimal",minimumIntegerDigits:1,maximumFractionDigits:2,minimumFractionDigits:2};return a().createElement(l.Grid,{fluid:!0,style:{maxHeight:400}},e.props.lineMeasureEnabled&&a().createElement(l.Row,null,a().createElement(l.FormGroup,{style:{display:"flex",alignItems:"center"}},e.props.lineMeasureValueEnabled&&a().createElement(l.Col,{xs:6},a().createElement("span",null,e.props.lengthLabel,": "),a().createElement("span",{id:"measure-len-res",className:"measure-value"},a().createElement("h3",null,a().createElement("strong",null,a().createElement(N.Z,{key:"len",numberParams:o,value:e.props.formatLength(e.props.uom.length.unit,e.props.measurement.len)})," ",e.props.uom.length.label)))),a().createElement(l.Col,{xs:6},a().createElement(A.DropdownList,{disabled:t,value:e.props.uom.length.label,onChange:t=>{e.props.onChangeUom("length",t,e.props.uom)},data:e.props.uomLengthValues,textField:"label",valueField:"value"})))),e.props.areaMeasureEnabled&&a().createElement(l.Row,null,a().createElement(l.FormGroup,{style:{display:"flex",alignItems:"center"}},e.props.areaMeasureValueEnabled&&a().createElement(l.Col,{xs:6},a().createElement("span",null,e.props.areaLabel,": "),a().createElement("span",{id:"measure-area-res",className:"measure-value"},a().createElement("h3",null,a().createElement("strong",null,a().createElement(N.Z,{key:"area",numberParams:o,value:e.props.formatArea(e.props.uom.area.unit,e.props.measurement.area)})," ",e.props.uom.area.label)))),a().createElement(l.Col,{xs:6},a().createElement(A.DropdownList,{disabled:t,value:e.props.uom.area.label,onChange:t=>{e.props.onChangeUom("area",t,e.props.uom)},data:e.props.uomAreaValues,textField:"label",valueField:"value"})))),e.props.bearingMeasureEnabled&&e.props.bearingMeasureValueEnabled&&a().createElement(l.Row,null,a().createElement(l.FormGroup,{style:{display:"flex",alignItems:"center",minHeight:34}},a().createElement(l.Col,{xs:6},a().createElement("span",null,e.isTrueBearing()?e.props.trueBearingLabel:e.props.bearingLabel,": "),a().createElement("span",{id:"measure-bearing-res",className:"measure-value"},a().createElement("h3",null,a().createElement("strong",null,e.props.formatBearing(e.props.measurement.bearing||0,e.isTrueBearing()&&e.props.measurement.trueBearing))))))))})),V(this,"renderPanel",(e=>this.props.showResults?this.renderMeasurements(e):null)),V(this,"renderLabel",(e=>this.props.showButtonsLabels?a().createElement("span",{className:"option-text"},(0,B.S$)(this.context.messages,e)):null)),V(this,"renderText",((e,t)=>e?a().createElement("span",null,a().createElement("span",{className:"option-icon"},a().createElement(l.Glyphicon,{glyph:e})),this.renderLabel(t)):this.renderLabel(t))),V(this,"isTrueBearing",(()=>this.props.measurement&&this.props.measurement.trueBearing&&this.props.measurement.trueBearing.measureTrueBearing))}UNSAFE_componentWillReceiveProps(e){e.geomType||this.props.toggleMeasure({geomType:"LineString"})}shouldComponentUpdate(e){return!M()(e,this.props)}render(){var e;let t,o;const r=C()(this.props.measurement,"features",[])[this.props.measurement.currentFeature||0],s=(null==r||null===(e=r.properties)||void 0===e?void 0:e.disabled)||!1,n=0===(this.props.measurement.features||[]).length||s;this.props.useSingleFeature?(t=(C()(this.props.measurement,"feature.geometry.type")||"").toLowerCase(),o=(C()(this.props.measurement,-1!==t.indexOf("polygon")?"feature.geometry.coordinates[0]":"feature.geometry.coordinates")||[]).map((e=>({lon:e[0],lat:e[1]})))):(t=C()(r,"geometry.type","").toLowerCase(),o=(C()(r,-1!==t.indexOf("polygon")?"geometry.coordinates[0]":"geometry.coordinates")||[]).map((e=>({lon:e[0],lat:e[1]}))));const{exportToAnnotation:i=!1}=this.props.measurement||{};return a().createElement(Z.Z,{id:this.props.id,style:{overflow:"visible"},header:a().createElement("div",null,a().createElement(l.ButtonToolbar,{style:{width:"100%",marginBottom:15,marginTop:8,display:"flex",justifyContent:"center"}},a().createElement(I.Z,{btnDefaultProps:{className:"square-button-md",bsStyle:"primary"},buttons:[{glyph:this.props.lineGlyph,active:!!this.props.lineMeasureEnabled,bsStyle:this.props.lineMeasureEnabled?"success":"primary",tooltip:this.renderText(this.props.inlineGlyph&&this.props.lineGlyph,"measureComponent.MeasureLength"),onClick:()=>this.onGeomClick("LineString"),disabled:!this.props.lineMeasureEnabled&&s},{active:!!this.props.areaMeasureEnabled,bsStyle:this.props.areaMeasureEnabled?"success":"primary",glyph:this.props.areaGlyph,tooltip:this.renderText(this.props.inlineGlyph&&this.props.areaGlyph,"measureComponent.MeasureArea"),onClick:()=>this.onGeomClick("Polygon"),disabled:!this.props.areaMeasureEnabled&&s},{visible:!this.props.disableBearing,active:!!this.props.bearingMeasureEnabled,bsStyle:this.props.bearingMeasureEnabled?"success":"primary",glyph:this.props.bearingGlyph,tooltip:this.renderText(this.props.inlineGlyph&&this.props.bearingGlyph,this.isTrueBearing()?"measureComponent.MeasureTrueBearing":"measureComponent.MeasureBearing"),onClick:()=>this.onGeomClick("Bearing"),disabled:!this.props.bearingMeasureEnabled&&s}]}),a().createElement(I.Z,{btnDefaultProps:{className:"square-button-md",bsStyle:"primary"},buttons:[{glyph:"remove",visible:!!this.props.withReset,tooltip:a().createElement(F.Z,{msgId:"measureComponent.resetTooltip"}),onClick:()=>this.onResetClick()}]}),a().createElement(I.Z,{btnDefaultProps:{className:"square-button-md",bsStyle:"primary"},buttons:[{glyph:"ext-json",disabled:n,visible:!!(this.props.bearingMeasureEnabled||this.props.areaMeasureEnabled||this.props.lineMeasureEnabled)&&this.props.showExportToGeoJSON,tooltip:a().createElement(F.Z,{msgId:"measureComponent.exportToGeoJSON"}),onClick:()=>{(0,k.LR)(JSON.stringify((0,G.tL)(this.props.measurement.features,this.props.measurement.textLabels,this.props.uom,P()(),"MapStore Measurements")),"measurements.json","application/geo+json")}},{glyph:"1-layer",visible:!!(this.props.bearingMeasureEnabled||this.props.areaMeasureEnabled||this.props.lineMeasureEnabled)&&this.props.showAddAsLayer,disabled:n||i,tooltip:a().createElement(F.Z,{msgId:"measureComponent.addAsLayer"}),onClick:()=>this.props.onAddAsLayer(this.props.measurement.features,this.props.measurement.textLabels,this.props.uom)},{glyph:i?"floppy-disk":"comment",tooltip:a().createElement(F.Z,{msgId:i?"measureComponent.saveMeasure":"measureComponent.addAsAnnotation"}),onClick:()=>{this.props.onAddAnnotation(this.props.measurement.features,this.props.measurement.textLabels,this.props.uom,!i,{id:this.props.measurement.id,visibility:this.props.measurement.visibility})},disabled:n,visible:!!(this.props.bearingMeasureEnabled||this.props.areaMeasureEnabled||this.props.lineMeasureEnabled)&&this.props.showAddAsAnnotation}]})),this.renderPanel(s))},this.props.showCoordinateEditor&&a().createElement(l.Grid,{fluid:!0,style:{maxHeight:400,borderTop:"1px solid #ddd"}},this.props.bearingMeasureEnabled||this.props.areaMeasureEnabled||this.props.lineMeasureEnabled?a().createElement(l.Row,{style:this.props.isCoordinateEditorEnabled?{}:{pointerEvents:"none",opacity:.5}},a().createElement(R.Z,{key:"measureEditor",isMouseEnterEnabled:!0,isMouseLeaveEnabled:!0,format:this.props.format,currentFeature:this.props.measurement.currentFeature,features:this.props.measurement.features,mapProjection:this.props.mapProjection,onChangeFormat:this.props.onChangeFormat,onHighlightPoint:this.props.onHighlightPoint,onChange:this.props.onChangeCoordinates,onChangeCurrentFeature:this.props.onChangeCurrentFeature,showFeatureSelector:this.props.showFeatureSelector,items:[],isDraggable:!0,type:this.props.geomType,showLengthAndBearingLabel:this.props.showLengthAndBearingLabel,components:this.props.useSingleFeature||-1===t.indexOf("polygon")?o:f()(o),properties:(null==r?void 0:r.properties)||{}})):a().createElement(l.Row,null,a().createElement(l.Col,{xs:12,className:"text-center",style:{padding:15}},a().createElement("i",null,a().createElement(F.Z,{msgId:"measureComponent.selectTool"}))))))}}V(D,"propTypes",{id:x().string,name:x().string,columnProperties:x().object,propertiesChangeHandler:x().func,lengthButtonText:x().oneOfType([x().string,x().element]),areaButtonText:x().oneOfType([x().string,x().element]),resetButtonText:x().oneOfType([x().string,x().element]),lengthLabel:x().oneOfType([x().string,x().element]),areaLabel:x().oneOfType([x().string,x().element]),bearingLabel:x().oneOfType([x().string,x().element]),trueBearingLabel:x().oneOfType([x().string,x().element]),uom:x().shape({length:x().shape({unit:x().string.isRequired,label:x().string.isRequired}),area:x().shape({unit:x().string.isRequired,label:x().string.isRequired})}),toggleMeasure:x().func,measurement:x().object,lineMeasureEnabled:x().bool,lineMeasureValueEnabled:x().bool,areaMeasureEnabled:x().bool,areaMeasureValueEnabled:x().bool,bearingMeasureEnabled:x().bool,bearingMeasureValueEnabled:x().bool,showButtons:x().bool,showResults:x().bool,mapProjection:x().string,lineGlyph:x().string,areaGlyph:x().string,bearingGlyph:x().string,withReset:x().bool,showButtonsLabels:x().bool,inlineGlyph:x().bool,formatLength:x().func,formatArea:x().func,formatBearing:x().func,onChangeUom:x().func,uomLengthValues:x().array,uomAreaValues:x().array,format:x().string,onChangeFormat:x().func,onChangeCoordinates:x().func,onChangeCurrentFeature:x().func,onAddAsLayer:x().func,onHighlightPoint:x().func,geomType:x().string,defaultOptions:x().object,onAddAnnotation:x().func,showAddAsAnnotation:x().bool,showLengthAndBearingLabel:x().bool,showAddAsLayer:x().bool,showFeatureSelector:x().bool,useSingleFeature:x().bool,showExportToGeoJSON:x().bool,disableBearing:x().bool,trueBearing:x().object,onMount:x().func,onUpdateOptions:x().func,showCoordinateEditor:x().bool,isCoordinateEditorEnabled:x().bool}),V(D,"contextTypes",{messages:x().object}),V(D,"defaultProps",{mapProjection:"EPSG:3857",columnProperties:{xs:4,sm:4,md:4},uomLengthValues:[{value:"ft",label:"ft"},{value:"m",label:"m"},{value:"km",label:"km"},{value:"mi",label:"mi"},{value:"nm",label:"nm"}],uomAreaValues:[{value:"sqft",label:"ft²"},{value:"sqm",label:"m²"},{value:"sqkm",label:"km²"},{value:"sqmi",label:"mi²"},{value:"sqnm",label:"nm²"}],id:"measure-result-panel",uom:{length:{unit:"m",label:"m"},area:{unit:"sqm",label:"m²"}},geomType:"LineString",defaultOptions:{geomType:"LineString"},showResults:!0,showAddAsAnnotation:!1,showAddAsLayer:!0,showExportToGeoJSON:!0,showCoordinateEditor:!1,isCoordinateEditorEnabled:!0,showLengthAndBearingLabel:!1,withReset:!0,lineGlyph:"1-measure-length",areaGlyph:"1-measure-area",bearingGlyph:"1-measure-bearing",showButtonsLabels:!0,lengthLabel:a().createElement(F.Z,{msgId:"measureComponent.lengthLabel"}),areaLabel:a().createElement(F.Z,{msgId:"measureComponent.areaLabel"}),bearingLabel:a().createElement(F.Z,{msgId:"measureComponent.bearingLabel"}),trueBearingLabel:a().createElement(F.Z,{msgId:"measureComponent.trueBearingLabel"}),formatLength:(e,t)=>(0,j.Ov)(t,"m",e),formatArea:(e,t)=>(0,j.Ov)(t,"sqm",e),formatBearing:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,j.rp)(S()(e||0,6),t)},onChangeUom:()=>{},onChangeFormat:()=>{},onMount:()=>{},onUpdateOptions:()=>{},onAddAsLayer:()=>{}});const H=D;var q=o(590504),U=o(908316);function X(){return X=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r])}return e},X.apply(this,arguments)}function z(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}class J extends a().Component{constructor(){super(...arguments),z(this,"onClose",(()=>{this.props.onClose(!1)})),z(this,"initDefaultOptions",(e=>{const{showCoordinateEditor:t,...o}=e;this.props.onMount(t||this.props.showCoordinateEditor),this.props.toggleMeasure({geomType:o.geomType||"LineString"}),this.props.onInit(o)}))}UNSAFE_componentWillMount(){this.initDefaultOptions(this.props.defaultOptions)}componentDidUpdate(e){M()(e.defaultOptions,this.props.defaultOptions)||this.initDefaultOptions(this.props.defaultOptions)}render(){return this.props.show?this.props.showCoordinateEditor?a().createElement(U.Z,{dock:!0,containerId:"measure-container",containerStyle:this.props.dockStyle,bsStyle:"primary",position:"right",title:a().createElement(F.Z,{key:"title",msgId:"measureComponent.Measure"}),glyph:"1-ruler",size:this.props.size,open:this.props.show,onClose:this.onClose,style:this.props.dockStyle},a().createElement(H,X({id:"measure-panel"},this.props))):a().createElement(q.Z,{id:"measure-dialog"},a().createElement("div",{key:"header",role:"header"},a().createElement(l.Glyphicon,{glyph:"1-ruler"})," ",a().createElement(F.Z,{key:"title",msgId:"measureComponent.Measure"}),a().createElement("button",{key:"close",onClick:this.onClose,className:"close"},this.props.closeGlyph?a().createElement(l.Glyphicon,{glyph:this.props.closeGlyph}):a().createElement("span",null,"×"))),a().createElement("div",{key:"body",role:"body"},a().createElement(H,X({id:"measure-panel",style:{minWidth:"500px"}},this.props)))):null}}z(J,"propTypes",{show:x().bool,closeGlyph:x().string,onClose:x().func,onMount:x().func,onInit:x().func,showCoordinateEditor:x().bool,defaultOptions:x().object,style:x().object,dockStyle:x().object,size:x().number}),z(J,"contextTypes",{messages:x().object}),z(J,"defaultProps",{show:!1,defaultOptions:{},onMount:()=>{},onInit:()=>{},toggleMeasure:()=>{},showCoordinateEditor:!1,showAddAsAnnotation:!1,closeGlyph:"1-close",dockStyle:{},size:550});const W=J;var $=o(350126);const Q=u.Xi.bind(null,"measure",null),_=(0,i.connect)((0,p.P1)([e=>({measurement:e.measurement||{},uom:e.measurement&&e.measurement.uom||{length:{unit:"m",label:"m"},area:{unit:"sqm",label:"m²"}},lineMeasureEnabled:e.measurement&&e.measurement.lineMeasureEnabled,lineMeasureValueEnabled:!(0,h.m6)(e),areaMeasureEnabled:e.measurement&&e.measurement.areaMeasureEnabled,areaMeasureValueEnabled:!(0,h.m6)(e),bearingMeasureEnabled:e.measurement&&e.measurement.bearingMeasureEnabled,showLengthAndBearingLabel:e.measurement&&e.measurement.showLengthAndBearingLabel,bearingMeasureValueEnabled:!(0,h.m6)(e),isCoordinateEditorEnabled:(0,g.iL)(e),showCoordinateEditor:(0,d.Iz)(e),showFeatureSelector:(0,h.m6)(e),useSingleFeature:!(0,h.m6)(e),withReset:(0,h.m6)(e),showExportToGeoJSON:(0,h.m6)(e),showAddAsAnnotation:(0,g.cD)(e)&&(0,h.m6)(e),trueBearing:(0,g.jM)(e),showAddAsLayer:(0,h.m6)(e),isCoordEditorEnabled:e.measurement&&!e.measurement.isDrawing,geomType:e.measurement&&e.measurement.geomType,format:e.measurement&&e.measurement.format,dockStyle:(0,$.ic)(e,{height:!0,right:!0},!0)}),e=>(0,d.QF)(e)],((e,t)=>({...e,show:t,format:e.format||b.ZP.getConfigProp("defaultCoordinateFormat")||"decimal"}))),{toggleMeasure:c.Bd,onAddAnnotation:c.ud,onChangeUom:c.Gd,onHighlightPoint:m.aS,onChangeFormat:c.RM,onInit:c.S1,onChangeCoordinates:c.dD,onChangeCurrentFeature:c.h2,onClose:Q,onMount:e=>(0,u.Xg)("measure","showCoordinateEditor",e),onAddAsLayer:c.NR},null,{pure:!1})(W),Y={MeasurePlugin:s()(_,{disablePluginIf:"{state('mapType') === 'cesium'}",BurgerMenu:{name:"measurement",position:9,panel:!1,help:a().createElement(y.Z,{msgId:"helptexts.measureComponent"}),tooltip:"measureComponent.tooltip",text:a().createElement(y.Z,{msgId:"measureComponent.Measure"}),icon:a().createElement(l.Glyphicon,{glyph:"1-ruler"}),action:()=>(0,u.Xg)("measure","enabled",!0),doNotHide:!0,priority:2},SidebarMenu:{name:"measurement",position:9,panel:!1,help:a().createElement(y.Z,{msgId:"helptexts.measureComponent"}),tooltip:"measureComponent.tooltip",text:a().createElement(y.Z,{msgId:"measureComponent.Measure"}),icon:a().createElement(l.Glyphicon,{glyph:"1-ruler"}),action:u.Xi.bind(null,"measure",null),toggle:!0,toggleControl:"measure",toggleProperty:"enabled",doNotHide:!0,priority:1}}),reducers:{measurement:o(7070).Z},epics:o(129125).ZP}},638510:(e,t,o)=>{"use strict";o.d(t,{Z:()=>w});var r=o(353131),s=o.n(r),n=o(727418),a=o.n(n),l=o(45697),i=o.n(l),p=o(124852),m=o.n(p),u=o(630294),c=o(171703),d=o(12838),h=o(687753),g=o(723813),b=o(956611),y=o(804504),E=o(401811),f=o(23888);function v(){return v=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r])}return e},v.apply(this,arguments)}function C(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}const T=(0,c.connect)((e=>({isVisible:e.controls&&e.controls.help&&e.controls.help.enabled})),{changeHelpText:g.n2,changeHelpwinVisibility:g.SA})(b.Z);class M extends m().Component{constructor(){super(...arguments),C(this,"getToolConfig",(e=>e.tool?{}:this.props.toolCfg)),C(this,"getTool",(e=>{if(e.tool)return!0===e.tool?e.plugin:e.tool;let t=()=>({});const o={};return e.exclusive?(t=t=>({active:t.controls&&t.controls[this.props.stateSelector]&&t.controls[this.props.stateSelector].active===e.name}),o[this.props.eventSelector]=h.Xg.bind(null,this.props.stateSelector,"active",e.name,!0)):e.toggle?(t=t=>({bsStyle:t.controls[e.toggleControl||e.name]&&t.controls[e.toggleControl||e.name][e.toggleProperty||"enabled"]?this.props.activeStyle:this.props.toolStyle,active:t.controls[e.toggleControl||e.name]&&t.controls[e.toggleControl||e.name][e.toggleProperty||"enabled"]||!1}),o[this.props.eventSelector]=h.Xi.bind(null,e.toggleControl||e.name,e.toggleProperty||null)):e.action&&(o[this.props.eventSelector]=s()(e.action,this.context),t=e.selector||t),(0,c.connect)(t,o,((e,t,o)=>this.mergeHandlers({...o,...e},t)))(this.props.tool)})),C(this,"renderTool",((e,t)=>{if(e.element)return e.element;const o=e.help?m().createElement(T,{className:"mapstore-helpbadge",helpText:e.help}):m().createElement("span",null),r=e.tooltip?m().createElement(y.Z,{msgId:e.tooltip}):null,s=this.getTool(e),n=this.getToolConfig(e),a=e.childTools||[];return this.addTooltip(m().createElement(s,v({},n,{pluginCfg:e.cfg,tooltip:r,style:e.style,btnSize:this.props.toolSize,bsStyle:this.props.toolStyle,help:o,key:e.name||"tool"+t,mapType:this.props.mapType},e.cfg,{items:e.items||[]}),e.cfg&&e.cfg.glyph?m().createElement(u.Glyphicon,{glyph:e.cfg.glyph}):e.icon,o," ",e.text,a.length>0&&m().createElement(M,v({},e.innerProps,{mapType:this.props.mapType,tools:a,panels:e.childPanels}))),e)})),C(this,"renderTools",(()=>this.props.tools.map(this.renderTool))),C(this,"renderPanels",(()=>this.props.panels.filter((e=>!e.panel.loadPlugin)).map((e=>{const t=e.panel,o=m().createElement(t,v({key:e.name,mapType:this.props.mapType},e.cfg,e.props||{},{items:e.items||[]})),r=e.title?m().createElement(y.Z,{msgId:e.title}):null;return e.wrap?m().createElement(u.Collapse,{key:"mapToolBar-item-collapse-"+e.name,in:this.props.activePanel===e.name},m().createElement(u.Panel,{header:r,style:this.props.panelStyle,className:this.props.panelClassName},o)):o})))),C(this,"mergeHandlers",((e,t)=>Object.keys(t).reduce(((o,r)=>a()(o,{[r]:e[r]?(0,d.qC)(e[r],t[r]):t[r]})),e))),C(this,"addTooltip",((e,t)=>{if(t.tooltip){let o=m().createElement(u.Tooltip,{id:this.props.id+"-"+t.name+"-tooltip"},m().createElement(y.Z,{msgId:t.tooltip}));return m().createElement(E.Z,{key:this.props.id+"-"+t.name+"-overlay",rootClose:!0,placement:"left",overlay:o},e)}return e}))}render(){const e=this.props.container;return m().createElement("span",{id:this.props.id,style:this.props.containerWrapperStyle},m().createElement(e,{id:this.props.id+"-container",style:this.props.style,className:this.props.className},this.renderTools()),this.renderPanels())}}C(M,"propTypes",{id:i().string.isRequired,container:i().func,containerWrapperStyle:i().object,tool:i().oneOfType([i().object,i().func]),className:i().string,style:i().object,tools:i().array,panels:i().array,mapType:i().string,toolStyle:i().string,activeStyle:i().string,toolSize:i().string,stateSelector:i().string.isRequired,eventSelector:i().string,panelStyle:i().object,panelClassName:i().string,activePanel:i().string,toolCfg:i().object}),C(M,"contextTypes",{messages:i().object,router:i().object}),C(M,"defaultProps",{container:u.Panel,className:"tools-container",style:{},toolStyle:"default",activeStyle:"primary",tools:[],panels:[],tool:f.Z,mapType:"leaflet",eventSelector:"onClick",panelStyle:{},panelClassName:"tools-container-panel",toolSize:null,toolCfg:{}});const w=M},870820:(e,t,o)=>{"use strict";o.d(t,{JF:()=>p,iL:()=>m,cD:()=>u,jM:()=>c,VH:()=>h,on:()=>g});var r=o(101092),s=o(119008),n=o(521923),a=o(556233),l=o(227361),i=o.n(l);const p=e=>i()(e,"controls.measure.enabled"),m=e=>(0,s.Iz)(e)&&!e.measurement.isDrawing&&(0,r.m6)(e),u=e=>e&&e.measurement&&e.measurement.showAddAsAnnotation,c=e=>e&&e.measurement&&e.measurement.trueBearing&&e.measurement.trueBearing.measureTrueBearing,d=e=>{let t=e.measurement.feature||{};return t.geometry&&(t=(0,n.t8)("geometry.coordinates",(0,a.L0)(t.geometry||{}),t)),t},h=e=>e.measurement&&{...e.measurement,feature:d(e)}||{},g=e=>{var t;return null==e||null===(t=e.measurement)||void 0===t?void 0:t.geomType}}}]);