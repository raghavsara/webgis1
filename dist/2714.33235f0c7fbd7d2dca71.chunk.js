(self.webpackChunkmapstore2=self.webpackChunkmapstore2||[]).push([[2714],{546273:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>H});var s=n(868195),o=n(45697),i=n.n(o),r=n(957557),a=n.n(r),l=n(867076);const c=e=>(0,l.mapProps)((t=>a()(t,e))),p={locale:navigator&&navigator.language,formats:{},messages:{},defaultLocale:"en",defaultFormats:{},formatDate:e=>e,formatTime:e=>e,formatRelative:e=>e,formatNumber:e=>e,formatPlural:e=>e,formatMessage:e=>e,formatHTMLMessage:e=>e,now:()=>new Date};var u=n(323113),h=n(877758),d=n(278426),g=n(36624),m=n(904101),f=n(37525),y=n(612814),w=n(124852),b=n.n(w),I=n(51273),S=n(436403),Z=n(120767),k=n(898185),v=n(831219),P=n(409371);function _(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class F extends b().Component{constructor(){super(...arguments),_(this,"getLayer",(()=>{let e;return this.props.map.getLayers().forEach((t=>{this.layersFilter(t)&&(e=t)}),this),e})),_(this,"setSelectInteraction",(()=>{this._selectInteraction.getActive()||this._selectInteraction.setActive(!0)})),_(this,"createSelectInteraction",(()=>{this.createStyle(),this._selectInteraction=new I.Z({layers:this.layersFilter,style:this._style,toggleCondition:S.QC}),this._selectInteraction.on("select",this.selectionChange,this),this.props.map.addInteraction(this._selectInteraction)})),_(this,"selectionChange",(()=>{let e=[];this._selectInteraction.getFeatures().forEach((t=>{e.push(t.getId())})),this.props.updateHighlighted(e,"")})),_(this,"cleanSupport",(()=>{this._selectInteraction&&this._selectInteraction.getActive()&&(this._selectInteraction.getFeatures().clear(),this.props.updateHighlighted([],""),this._selectInteraction.setActive(!1))})),_(this,"layersFilter",(e=>this.props.layer&&e.get("msId")===this.props.layer)),_(this,"createStyle",(()=>{let e=this.props.selectedStyle,t={stroke:new Z.default(e.stroke?e.stroke:{color:"blue",width:1}),fill:new k.default(e.fill?e.fill:{color:"blue"})};"Point"===e.type&&(t={image:new P.default({...t,radius:e.radius||5})}),this._style=new v.default(t)})),_(this,"highlightFeatures",(e=>{let t=this.getLayer(),n=this._selectInteraction.getFeatures();n.clear(),t&&t.getSource().getFeatures().map((t=>{-1!==e.indexOf(t.getId())&&n.push(t)}),this)}))}componentDidMount(){this.createSelectInteraction(),"enabled"===this.props.status?this._selectInteraction.setActive(!0):this._selectInteraction.setActive(!1),this.props.features&&this.highlightFeatures(this.props.features)}shouldComponentUpdate(e){let t=this.props;return e.status!==t.status||e.layer!==t.layer||"update"===e.status&&e.features.toString()!==t.features.toString()}UNSAFE_componentWillUpdate(e){switch(e.status){case"enabled":this.setSelectInteraction(e);break;case"disabled":this.cleanSupport();break;case"update":this.highlightFeatures(e.features);break;default:return}}componentWillUnmount(){this._selectInteraction&&(this.cleanSupport(),this._selectInteraction.un("select",this.selectionChange,this),this.props.map.removeInteraction(this._selectInteraction),this._selectInteraction=null,this._style=null)}render(){return null}}_(F,"propTypes",{map:i().object,layer:i().string.isRequired,status:i().oneOf(["disabled","enabled","update"]),updateHighlighted:i().func,selectedStyle:i().object,features:i().array}),_(F,"contextTypes",{messages:i().object}),_(F,"defaultProps",{status:"disabled",updateHighlighted:()=>{},selectedStyle:{type:"Point",radius:12,stroke:{width:4,color:"yellow"},fill:{color:"red"}}});var C=n(973410),L=n(429902),T=n(372445),D=n(718369);function j(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class A extends b().Component{constructor(){super(...arguments),j(this,"addDrawInteraction",(e=>{this.drawInteraction&&this.removeDrawInteraction();let t=new C.Z,n=new L.Z({source:t,zIndex:1e6,style:new v.default({fill:new k.default({color:"rgba(255, 255, 255, 0.2)"}),stroke:new Z.default({color:"#ffcc33",width:2}),image:new P.default({radius:7,fill:new k.default({color:"#ffcc33"})})})});this.props.map.addLayer(n);let s=new T.ZP({source:t,type:e.selection.geomType,style:new v.default({fill:new k.default({color:"rgba(255, 255, 255, 0.2)"}),stroke:new Z.default({color:"rgba(0, 0, 0, 0.5)",lineDash:[10,10],width:2}),image:new P.default({radius:5,stroke:new Z.default({color:"rgba(0, 0, 0, 0.7)"}),fill:new k.default({color:"rgba(255, 255, 255, 0.2)"})})})});s.on("drawstart",(e=>{this.sketchFeature=e.feature,t.clear()})),s.on("drawend",(()=>{this.updateSelectionState()})),this.props.map.addInteraction(s),this.drawInteraction=s,this.selectionLayer=n,this.setDoubleClickZoomEnabled(!1)})),j(this,"removeDrawInteraction",(()=>{null!==this.drawInteraction&&(this.props.map.removeInteraction(this.drawInteraction),this.drawInteraction=null,this.props.map.removeLayer(this.selectionLayer),this.sketchFeature=null,setTimeout((()=>this.setDoubleClickZoomEnabled(!0)),251))})),j(this,"updateSelectionState",(()=>{if(!this.sketchFeature)return;const e=this.sketchFeature.getGeometry().getCoordinates();let t={geomType:this.props.selection.geomType,point:"Point"===this.props.selection.geomType?[e[0],e[1]]:null,line:"LineString"===this.props.selection.geomType?e.map((e=>[e[0],e[1]])):null,polygon:"Polygon"===this.props.selection.geomType?this.sketchFeature.getGeometry().getLinearRing(0).getCoordinates().map((e=>[e[0],e[1]])):null};this.props.changeSelectionState(t)})),j(this,"setDoubleClickZoomEnabled",(e=>{let t=this.props.map.getInteractions();for(let n=0;n<t.getLength();n++){let s=t.item(n);if(s instanceof D.Z){s.setActive(e);break}}}))}UNSAFE_componentWillReceiveProps(e){e.selection.geomType&&e.selection.geomType!==this.props.selection.geomType&&this.addDrawInteraction(e),e.selection.geomType||this.removeDrawInteraction()}render(){return null}}j(A,"propTypes",{map:i().object,projection:i().string,selection:i().object,changeSelectionState:i().func}),j(A,"defaultProps",{selection:{}});var M=n(993847),x=n(227556);const E=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return(0,l.compose)((0,l.getContext)({intl:i().object}),(0,l.branch)((e=>{let{intl:t}=e;return!!t}),s.injectIntl,(0,l.withProps)({intl:p})),(0,l.withPropsOnChange)(["intl"],(t=>{let{intl:n={}}=t;return e.reduce((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return{...e,[t]:n[t]}}),{})})),c(["intl"]))}(["formatNumber"]),H={LMap:u.Z,Layer:h.Z,Feature:d.Z,MeasurementSupport:E(g.Z),Overview:m.Z,ScaleBar:f.Z,DrawSupport:y.Z,HighlightFeatureSupport:F,SelectionSupport:A,PopupSupport:M.Z,BoxSelectionSupport:x.Z}},782527:(e,t,n)=>{"use strict";n.d(t,{y7:()=>b,oU:()=>I,hH:()=>S});var s=n(573800),o=n(345801),i=n(386306),r=n(718369),a=n(878516),l=n(500052),c=n(848041),p=n(978653),u=n(497950),h=n(752043),d=n(944538),g=n(552329),m=n(525642),f=n(513987),y=n(869669),w=n(640353);const b=function(){let e,{type:t,coordinates:n,radius:s,center:o}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};switch(t){case"Point":e=new h.Z(n||[]);break;case"LineString":e=new d.Z(n||[]);break;case"MultiPoint":e=new g.Z(n||[]);break;case"MultiLineString":e=new m.Z(n||[]);break;case"MultiPolygon":e=new f.Z(n||[]);break;default:e=s&&o?(0,w.Bb)(new y.Z([o.x,o.y],s),100):new w.ZP(n||[])}return e},I=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e&&e.geometry&&"Polygon"===e.geometry.type},S={dragPan:{options:{kinetic:!1},Instance:s.Z},keyboardPan:{options:{kinetic:!1},Instance:o.Z},mouseWheelZoom:{options:{duration:0},Instance:i.Z},doubleClickZoom:{options:{duration:0},Instance:r.Z},shiftDragZoom:{options:{duration:0},Instance:a.Z},keyboardZoom:{options:{},Instance:l.Z},pinchZoom:{options:{duration:0},Instance:c.Z},pinchRotate:{options:{},Instance:p.Z},altShiftDragRotate:{options:{},Instance:u.Z}}}}]);