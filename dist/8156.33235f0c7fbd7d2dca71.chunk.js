(self.webpackChunkmapstore2=self.webpackChunkmapstore2||[]).push([[8156],{230195:(e,t,n)=>{"use strict";n.d(t,{Z:()=>p});var r=n(124852),a=n.n(r),o=n(45697),i=n.n(o);function l(){return l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l.apply(this,arguments)}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class p extends a().Component{constructor(e){super(e),s(this,"state",{inputText:""}),s(this,"validateValue",(e=>!this.props.formatRegex||new RegExp(this.props.formatRegex).test(e))),this.state={inputText:e.value},this.inputRef=a().createRef()}componentDidMount(){var e,t;null===(e=(t=this.props).onTemporaryChanges)||void 0===e||e.call(t,!0)}componentWillUnmount(){var e,t;null===(e=(t=this.props).onTemporaryChanges)||void 0===e||e.call(t,!1)}getValue(){return{[this.props.column.key]:this.validateValue(this.state.inputText)?this.state.inputText:this.props.value}}getInputNode(){return this.inputRef.current}render(){return a().createElement("input",l({},this.props.inputProps,{style:!this.state.validated||this.state.isValid?{}:{borderColor:"red"},value:this.state.inputText,ref:this.inputRef,className:"form-control",defaultValue:this.props.value,onChange:e=>{this.setState({inputText:e.target.value,isValid:this.validateValue(e.target.value),validated:!0})}}))}}s(p,"propTypes",{value:i().string,inputProps:i().object,dataType:i().string,column:i().object,formatRegex:i().string,onTemporaryChanges:i().func}),s(p,"defaultProps",{dataType:"string",column:{}})},188156:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>S});var r=n(124852),a=n.n(r),o=n(630294),i=n(867076),l=n(452341),s=n(753370),p=n.n(s),u=n(984596),m=n.n(u),d=n(264721),c=n.n(d),h=n(545578),g=n.n(h),f=n(441609),v=n.n(f),y=n(804504),b=n(230195);const w=(e,t,n)=>{const r=m()(t);return n?e.filter((e=>!c()(r,e.name))):g()([...e,...r.map((e=>({name:e})))],"name")},x=(e,t)=>Array.from({length:t+1-e},((t,n)=>n+e)),C=e=>a().createElement(b.Z,{dataType:"string",formatRegex:e}),E=[{name:"Name",key:"attribute",width:120},{name:"Title",key:"title",editor:C("^[-@.\\/#&+\\w\\s*]{0,100}$"),width:120,editable:e=>!(null!=e&&e.hide)},{name:"Description",key:"description",editor:C("^[-@.,\\/#&+\\w\\s*]{0,200}$"),width:150,editable:e=>!(null!=e&&e.hide)}];var T=n(77665),R=n(657579),N=n(23888);const k=(0,i.compose)((0,i.withProps)((e=>{var t;let{options:n={}}=e;return{options:{propertyName:null===(t=(null==n?void 0:n.propertyName)||[])||void 0===t?void 0:t.map((e=>"string"==typeof e?{name:e}:e))}}})),(0,i.withProps)((function(){let{attributes:e=[],options:t={}}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{attributes:e.filter((e=>!(0,l.isGeometryType)(e))).map((e=>{var n,r;const a=null==t||null===(n=t.propertyName)||void 0===n?void 0:n.map((e=>e.name)),o=null==t||null===(r=t.propertyName)||void 0===r?void 0:r.find((t=>t.name===e.name));return{...e,label:e.name,attribute:e.name,hide:(null==a?void 0:a.indexOf(e.name))<0,title:(null==o?void 0:o.title)||"",description:(null==o?void 0:o.description)||""}}))}})),(0,R.Z)((e=>{let{attributes:t=[]}=e;return 0===t.length})))((function(){let{style:e={},titleMsg:t="featuregrid.columns",onChange:n=(()=>{}),attributes:r=[],options:o={}}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const i=e=>r[e],l=e=>{let{fromRow:t,toRow:r,updated:a}=e;const[{name:l}={}]=x(t,r).map((e=>i(e))).filter((e=>Object.keys(a||{}).filter((t=>e[t]!==a[t])).length>0));!v()(l)&&n("options.propertyName",o.propertyName.map((e=>l===e.name?{...e,...a}:e)))},s=(e,t)=>{n("options.propertyName",w(o&&o.propertyName||[],e,t))};return a().createElement("div",{className:"bg-body data-attribute-selector",style:e},a().createElement("h4",{className:"text-center"},a().createElement("strong",null,a().createElement(y.Z,{msgId:t}))),a().createElement(p(),{rowKey:"id",columns:E,enableCellSelect:!0,rowGetter:i,rowsCount:r.length,onGridRowsUpdated:l,rowSelection:{showCheckbox:!0,enableShiftSelect:!0,onRowsSelected:e=>s(e.map((e=>r[e.rowIdx].name)),!1),onRowsDeselected:e=>s(e.map((e=>r[e.rowIdx].name)),!0),selectBy:{indexes:r.reduce(((e,t,n)=>[...e,...t.hide?[]:[n]]),[])}}}))})),S=e=>{let{data:t={options:{}},onChange:n=(()=>{}),featureTypeProperties:r,sampleChart:i}=e;return a().createElement(o.Row,null,a().createElement(T.Z,{title:a().createElement(y.Z,{msgId:"widgets.builder.wizard.configureTableOptions"})}),a().createElement(o.Col,{xs:12},a().createElement("div",null,i)),a().createElement(o.Col,{xs:12},a().createElement(o.Form,{className:"chart-options-form",horizontal:!0},a().createElement(k,{options:t.options,onChange:n,attributes:r}),t.options&&t.options.columnSettings?a().createElement(N.Z,{style:{float:"right"},onClick:()=>n("options.columnSettings",void 0)},a().createElement(y.Z,{msgId:"widgets.builder.wizard.resetColumnsSizes"})):null)))}}}]);